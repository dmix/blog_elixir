<!doctype html>
<html class='no-js' lang='en'>
<head>
    <%= render "app_head.html", conn: @conn %>
</head>

<!-- TODO: add class containing .controller_name .action_name to <body>-->
<body class='w-100 sans-serif'>
	<div class='clearfix border'>
		<div class='layout'>

            <!-- Mobile Search-->
            <section class='layout--search dn-l dn-m db-ns w-100-ns fn bb b--layout'>
                <%= component "layout_search", conn: @conn %>
            </section>

            <!--   ### Sidebar ###   -->
            <aside class='layout--sidebar w-100 w-25-l w-30-m w-100-ns fn fl-ns br b--layout shadow-side-1'>
                <div class='ph4-l ph3-m ph3-ns'>
                  <!--   Navigation  -->
                  <%= component "layout_sidebar", conn: @conn %>
                </div>
            </aside>

            <!--   ### Main ###   -->
            <main class='layout--main w-100 w-75-l w-70-m w-100-ns fn fl-ns'>

                <!--   Alerts   -->
                <section class='layout--alerts w-100-l fn'>
                    <%= component "layout_alert", conn: @conn %>
                </section>

                <!--   Search   -->
                <section class='layout--search db-l db-m dn db-l db-m w-100 fn bb b--layout'>
                    <%= component "layout_search", conn: @conn %>
                </section>

                <%= if assigns[:sidebar] do %>
                  <!--   Sidebar  -->
                  <aside class='layout--subnav w-20-l mw1-m dn db-l dn-m dn-ns fn fl-ns b--layout br'>

                      <div class='ph3 pt2' style='min-height:1000px'>
                          <%= component "category_list", conn: @conn, categories: @categories, selected_category: @category %>
                      </div>

                  </aside>
                <% end %>

                <!--   Content   -->
                <section class='layout--content w-100 w-80-l fn fl-ns pv4 ph3 ph5-l ph4-m'>
                    <%= render @view_module, @view_template, assigns %>
                </section>

                <%= if !assigns[:sidebar] do %>
                    <!--   Buffer   -->
                    <aside class='layout--buffer w-20-l mw1-m db-l dn-m dn-ns fn fl-ns'>
                        <br>
                    </aside>
                <% end %>

            </main>

            <!--  ### Footer ###   -->
            <footer class='layout--footer
                           w-100-l
                           fl fl-ns
                           black-70
                           ph3 ph5-ns pv5 pv6-ns
                           bt b--black-10'>
                <%= component "layout_footer", conn: @conn %>
            </footer>

		</div>
	</div>

    <!--   Scripts   -->
	<%= render "app_script.html", conn: @conn %>
</body>
</html>
